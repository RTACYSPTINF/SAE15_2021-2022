<!DOCTYPE html>
<!-- saved from url=(0061)https://iut-info.univ-reims.fr/users/nocent/python/?section=9 -->
<html lang="fr" class="has-navbar-fixed-top fontawesome-i2svg-active fontawesome-i2svg-complete"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>@oliviernocent</title>

    <style type="text/css">svg:not(:root).svg-inline--fa{overflow:visible}.svg-inline--fa{display:inline-block;font-size:inherit;height:1em;overflow:visible;vertical-align:-.125em}.svg-inline--fa.fa-lg{vertical-align:-.225em}.svg-inline--fa.fa-w-1{width:.0625em}.svg-inline--fa.fa-w-2{width:.125em}.svg-inline--fa.fa-w-3{width:.1875em}.svg-inline--fa.fa-w-4{width:.25em}.svg-inline--fa.fa-w-5{width:.3125em}.svg-inline--fa.fa-w-6{width:.375em}.svg-inline--fa.fa-w-7{width:.4375em}.svg-inline--fa.fa-w-8{width:.5em}.svg-inline--fa.fa-w-9{width:.5625em}.svg-inline--fa.fa-w-10{width:.625em}.svg-inline--fa.fa-w-11{width:.6875em}.svg-inline--fa.fa-w-12{width:.75em}.svg-inline--fa.fa-w-13{width:.8125em}.svg-inline--fa.fa-w-14{width:.875em}.svg-inline--fa.fa-w-15{width:.9375em}.svg-inline--fa.fa-w-16{width:1em}.svg-inline--fa.fa-w-17{width:1.0625em}.svg-inline--fa.fa-w-18{width:1.125em}.svg-inline--fa.fa-w-19{width:1.1875em}.svg-inline--fa.fa-w-20{width:1.25em}.svg-inline--fa.fa-pull-left{margin-right:.3em;width:auto}.svg-inline--fa.fa-pull-right{margin-left:.3em;width:auto}.svg-inline--fa.fa-border{height:1.5em}.svg-inline--fa.fa-li{width:2em}.svg-inline--fa.fa-fw{width:1.25em}.fa-layers svg.svg-inline--fa{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0}.fa-layers{display:inline-block;height:1em;position:relative;text-align:center;vertical-align:-.125em;width:1em}.fa-layers svg.svg-inline--fa{-webkit-transform-origin:center center;transform-origin:center center}.fa-layers-counter,.fa-layers-text{display:inline-block;position:absolute;text-align:center}.fa-layers-text{left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);-webkit-transform-origin:center center;transform-origin:center center}.fa-layers-counter{background-color:#ff253a;border-radius:1em;-webkit-box-sizing:border-box;box-sizing:border-box;color:#fff;height:1.5em;line-height:1;max-width:5em;min-width:1.5em;overflow:hidden;padding:.25em;right:0;text-overflow:ellipsis;top:0;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:top right;transform-origin:top right}.fa-layers-bottom-right{bottom:0;right:0;top:auto;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:bottom right;transform-origin:bottom right}.fa-layers-bottom-left{bottom:0;left:0;right:auto;top:auto;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:bottom left;transform-origin:bottom left}.fa-layers-top-right{right:0;top:0;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:top right;transform-origin:top right}.fa-layers-top-left{left:0;right:auto;top:0;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:top left;transform-origin:top left}.fa-lg{font-size:1.33333em;line-height:.75em;vertical-align:-.0667em}.fa-xs{font-size:.75em}.fa-sm{font-size:.875em}.fa-1x{font-size:1em}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-6x{font-size:6em}.fa-7x{font-size:7em}.fa-8x{font-size:8em}.fa-9x{font-size:9em}.fa-10x{font-size:10em}.fa-fw{text-align:center;width:1.25em}.fa-ul{list-style-type:none;margin-left:2.5em;padding-left:0}.fa-ul>li{position:relative}.fa-li{left:-2em;position:absolute;text-align:center;width:2em;line-height:inherit}.fa-border{border:solid .08em #eee;border-radius:.1em;padding:.2em .25em .15em}.fa-pull-left{float:left}.fa-pull-right{float:right}.fa.fa-pull-left,.fab.fa-pull-left,.fal.fa-pull-left,.far.fa-pull-left,.fas.fa-pull-left{margin-right:.3em}.fa.fa-pull-right,.fab.fa-pull-right,.fal.fa-pull-right,.far.fa-pull-right,.fas.fa-pull-right{margin-left:.3em}.fa-spin{-webkit-animation:fa-spin 2s infinite linear;animation:fa-spin 2s infinite linear}.fa-pulse{-webkit-animation:fa-spin 1s infinite steps(8);animation:fa-spin 1s infinite steps(8)}@-webkit-keyframes fa-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes fa-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.fa-rotate-90{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.fa-rotate-180{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.fa-rotate-270{-webkit-transform:rotate(270deg);transform:rotate(270deg)}.fa-flip-horizontal{-webkit-transform:scale(-1,1);transform:scale(-1,1)}.fa-flip-vertical{-webkit-transform:scale(1,-1);transform:scale(1,-1)}.fa-flip-horizontal.fa-flip-vertical{-webkit-transform:scale(-1,-1);transform:scale(-1,-1)}:root .fa-flip-horizontal,:root .fa-flip-vertical,:root .fa-rotate-180,:root .fa-rotate-270,:root .fa-rotate-90{-webkit-filter:none;filter:none}.fa-stack{display:inline-block;height:2em;position:relative;width:2em}.fa-stack-1x,.fa-stack-2x{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0}.svg-inline--fa.fa-stack-1x{height:1em;width:1em}.svg-inline--fa.fa-stack-2x{height:2em;width:2em}.fa-inverse{color:#fff}.sr-only{border:0;clip:rect(0,0,0,0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.sr-only-focusable:active,.sr-only-focusable:focus{clip:auto;height:auto;margin:0;overflow:visible;position:static;width:auto}</style><link rel="stylesheet" href="./@oliviernocent_files/bulma.min.css">

    <script src="./@oliviernocent_files/burgernavtoggle.js.téléchargement"></script>
    <script defer="" src="./@oliviernocent_files/all.js.téléchargement"></script>

    <meta name="author" content="Olivier NOCENT">
    <meta name="keywords" content="HTML5, CSS3, JavaScript">
    <link rel="stylesheet" href="./@oliviernocent_files/prism.css">
    <link rel="stylesheet" href="./@oliviernocent_files/style.css">

  </head>
  <body>
    <nav class="navbar is-fixed-top is-light" role="navigation" aria-label="main navigation">
      <div class="navbar-brand">
        <a class="navbar-item" href="https://iut-info.univ-reims.fr/users/nocent/">
          <span style="font-size: 1.5em">@oliviernocent</span>
        </a>

        <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>
      <div class="navbar-menu" id="navMenu">
        <div class="navbar-start">
          <!-- navbar items -->
        </div>

        <div class="navbar-end">
          <a id="open-modal" class="navbar-item" href="https://iut-info.univ-reims.fr/users/nocent/python/?section=9#">
            Chapitres
          </a>
          <a class="navbar-item" href="https://iut-info.univ-reims.fr/users/nocent/about.html">
            À propos
          </a>
          <a class="navbar-item" href="https://iut-info.univ-reims.fr/users/nocent/contact.html">
            Contact
          </a>
        </div>
      </div>
    </nav>
    
    <div class="modal">
      <div class="modal-background"></div>
      <div class="modal-card">
        <header class="modal-card-head">
          <p class="modal-card-title">Table des matières</p>
        </header>
        <section class="modal-card-body">
            <ul>
                          <li><a href="https://iut-info.univ-reims.fr/users/nocent/python/?section=0">Configuration</a>
                  </li><li><a href="https://iut-info.univ-reims.fr/users/nocent/python/?section=1">Premiers pas</a>
                  </li><li><a href="https://iut-info.univ-reims.fr/users/nocent/python/?section=2">Interaction simple</a>
                  </li><li><a href="https://iut-info.univ-reims.fr/users/nocent/python/?section=3">Chargement de fichiers CSV</a>
                  </li><li><a href="https://iut-info.univ-reims.fr/users/nocent/python/?section=4">Visualisation de trajectoires</a>
                  </li><li><a href="https://iut-info.univ-reims.fr/users/nocent/python/?section=5">Chargement de fichiers GPX</a>
                  </li><li><a href="https://iut-info.univ-reims.fr/users/nocent/python/?section=6">Calcul de distances</a>
                  </li><li><a href="https://iut-info.univ-reims.fr/users/nocent/python/?section=7">Gestion du temps</a>
                  </li><li><a href="https://iut-info.univ-reims.fr/users/nocent/python/?section=8">Enregistrement de fichiers CSV</a>
                  </li><li><a href="https://iut-info.univ-reims.fr/users/nocent/python/?section=9">Cartographie</a>
                  </li><li><a href="https://iut-info.univ-reims.fr/users/nocent/python/?section=10">Interface graphique</a>
                  </li><li><a href="https://iut-info.univ-reims.fr/users/nocent/python/?section=11">Traitement de données structurées</a>
                  </li><li><a href="https://iut-info.univ-reims.fr/users/nocent/python/?section=12">Utilisation d'APIs</a>
                  </li><li><a href="https://iut-info.univ-reims.fr/users/nocent/python/?section=13">Traitement de vidéos</a>
                </li></ul>
            
        </section>
      </div>
    </div>
    

<section class="section">
  <div role="main" class="container content">
    <h1>Cartographie</h1>

    <p>
      Bouquet final de cette activité autour des fichiers GPX : la visualisation
      d'informations géolocalisées sur une carte interactive.
      Il existe justement un module Python qui facilite cette opération.
    </p>

    <h2>Le module <code>folium</code></h2>

    <p>
      Ce module doit être installé avant d'être utilisé. La commande sous Windows
      est la suivante :
    </p>

    <pre class=" language-none"><code class=" language-none">pip.exe install folium</code></pre>

    <p>Et sous macOS ou Linux</p>

    <pre class=" language-none"><code class=" language-none">pip3 install folium</code></pre>

    <div class="message is-danger">
      <div class="message-header">
        <p>Attention !</p>
      </div>
      <div class="message-body">
        <p>
          Cette commande doit être exécutée en mode administrateur. Sous Windows, dans le menu
          Démarrer, clic droit sur l'application "invite de commandes" et choisir "exécuter en
          tant qu'administrateur".
        </p>

        <p>
          Si vous ne disposez pas des droits administrateur, vous pouvez ajouter l'option
          <code>--user</code> à la fin de la commande pour installer le module dans votre
          compte utilisateur.
        </p>
      </div>
    </div>

    <p>
      Le module <code>folium</code> permet de créer une carte interactive et d'y dessiner
      des marqueurs, des lignes brisées, des polygones, <em>etc</em>.
    </p>

    <pre class=" language-python"><code class=" language-python"><span class="prism--token prism--keyword">import</span> folium

<span class="prism--token prism--comment"># Création d'une carte</span>
fmap <span class="prism--token prism--operator">=</span> folium<span class="prism--token prism--punctuation">.</span>Map<span class="prism--token prism--punctuation">(</span>location<span class="prism--token prism--operator">=</span><span class="prism--token prism--punctuation">[</span><span class="prism--token prism--number">55.7353606</span><span class="prism--token prism--punctuation">,</span> <span class="prism--token prism--number">10.822693</span><span class="prism--token prism--punctuation">]</span><span class="prism--token prism--punctuation">,</span> tiles<span class="prism--token prism--operator">=</span><span class="prism--token prism--string">'OpenStreetMap'</span><span class="prism--token prism--punctuation">,</span> zoom_start<span class="prism--token prism--operator">=</span><span class="prism--token prism--number">8</span><span class="prism--token prism--punctuation">)</span>

<span class="prism--token prism--comment"># Ajout d'un marqueur</span>
folium<span class="prism--token prism--punctuation">.</span>Marker<span class="prism--token prism--punctuation">(</span><span class="prism--token prism--punctuation">[</span><span class="prism--token prism--number">55.8716693</span><span class="prism--token prism--punctuation">,</span> <span class="prism--token prism--number">9.8839912</span><span class="prism--token prism--punctuation">]</span><span class="prism--token prism--punctuation">,</span>
              popup<span class="prism--token prism--operator">=</span><span class="prism--token prism--string">'VIA University College'</span><span class="prism--token prism--punctuation">,</span>
              icon<span class="prism--token prism--operator">=</span>folium<span class="prism--token prism--punctuation">.</span>Icon<span class="prism--token prism--punctuation">(</span>color<span class="prism--token prism--operator">=</span><span class="prism--token prism--string">'green'</span><span class="prism--token prism--punctuation">)</span><span class="prism--token prism--punctuation">)</span><span class="prism--token prism--punctuation">.</span>add_to<span class="prism--token prism--punctuation">(</span>fmap<span class="prism--token prism--punctuation">)</span>


<span class="prism--token prism--comment"># Ajout d'une ligne brisée définie à partir de 5 points</span>
points <span class="prism--token prism--operator">=</span> <span class="prism--token prism--punctuation">[</span>
  <span class="prism--token prism--punctuation">(</span><span class="prism--token prism--number">55.6713808</span><span class="prism--token prism--punctuation">,</span> <span class="prism--token prism--number">12.4533972</span><span class="prism--token prism--punctuation">)</span><span class="prism--token prism--punctuation">,</span>
  <span class="prism--token prism--punctuation">(</span><span class="prism--token prism--number">55.4013094</span><span class="prism--token prism--punctuation">,</span> <span class="prism--token prism--number">11.2062387</span><span class="prism--token prism--punctuation">)</span><span class="prism--token prism--punctuation">,</span>
  <span class="prism--token prism--punctuation">(</span><span class="prism--token prism--number">55.3311408</span><span class="prism--token prism--punctuation">,</span> <span class="prism--token prism--number">10.6322608</span><span class="prism--token prism--punctuation">)</span><span class="prism--token prism--punctuation">,</span>
  <span class="prism--token prism--punctuation">(</span><span class="prism--token prism--number">55.7148992</span><span class="prism--token prism--punctuation">,</span> <span class="prism--token prism--number">9.3734841</span><span class="prism--token prism--punctuation">)</span><span class="prism--token prism--punctuation">,</span>
  <span class="prism--token prism--punctuation">(</span><span class="prism--token prism--number">55.8716693</span><span class="prism--token prism--punctuation">,</span> <span class="prism--token prism--number">9.8839912</span><span class="prism--token prism--punctuation">)</span>
<span class="prism--token prism--punctuation">]</span>

folium<span class="prism--token prism--punctuation">.</span>PolyLine<span class="prism--token prism--punctuation">(</span>points<span class="prism--token prism--punctuation">,</span> color<span class="prism--token prism--operator">=</span><span class="prism--token prism--string">'blue'</span><span class="prism--token prism--punctuation">,</span> weight<span class="prism--token prism--operator">=</span><span class="prism--token prism--number">2.5</span><span class="prism--token prism--punctuation">,</span> opacity<span class="prism--token prism--operator">=</span><span class="prism--token prism--number">0.8</span><span class="prism--token prism--punctuation">)</span><span class="prism--token prism--punctuation">.</span>add_to<span class="prism--token prism--punctuation">(</span>fmap<span class="prism--token prism--punctuation">)</span>

<span class="prism--token prism--comment"># Génération du fichier HTML contenant la carte</span>
fmap<span class="prism--token prism--punctuation">.</span>save<span class="prism--token prism--punctuation">(</span><span class="prism--token prism--string">'via.html'</span><span class="prism--token prism--punctuation">)</span></code></pre>

    <div class="embed16x9">
      <iframe width="640" height="360" src="./@oliviernocent_files/via.html"></iframe>
    </div>

    <p>
      La méthode <code>folium.Map(location=[latitude, longitude], tiles='OpenStreetMap', zoom_start=zoom)</code> crée
      une carte centrée sur le point de coordonnées (<code>latitude</code>,
      <code>longitude</code>) avec un grossissement égal à <code>zoom_start</code> (compris entre 1
      et 18). Il est possible d'utiliser plusieurs fonds de carte en initialisant le paramètre <code>tiles</code> avec
      <code>OpenStreetMap</code>, <code>Stamen Terrain</code> ou <code>Stamen Toner</code>.
    </p>

    <p>
      La méthode <code>Marker()</code> place un marqueur sur la carte au point de cordonnées
      (<code>latitude</code>,<code>longitude</code>) avec une couleur (paramètre <code>color</code>)
      choisie dans la palette suivante :
    </p>

    <table class="table">
      <thead>
        <tr>
          <th>Nom</th>
          <th>Couleur</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>black</code></td>
          <td><span style="display:inline-block;width:100px;height:30px;background-color:black;border-radius:4px"></span></td>
        </tr>
        <tr>
          <td><code>gray</code></td>
          <td><span style="display:inline-block;width:100px;height:30px;background-color:gray;border-radius:4px"></span>
          </td>
        </tr>
        <tr>
          <td><code>lightgray</code></td>
          <td><span style="display:inline-block;width:100px;height:30px;background-color:lightgray;border-radius:4px"></span>
          </td>
        </tr>
        <tr>
          <td><code>white</code></td>
          <td><span style="display:inline-block;width:100px;height:30px;background-color:white;border:solid black 1px;border-radius:4px"></span>
          </td>
        </tr>
        <tr>
          <td><code>darkred</code></td>
          <td><span style="display:inline-block;width:100px;height:30px;background-color:darkred;border-radius:4px"></span>
          </td>
        </tr>
        <tr>
          <td><code>red</code></td>
          <td><span style="display:inline-block;width:100px;height:30px;background-color:red;border-radius:4px"></span>
          </td>
        </tr>
        <tr>
          <td><code>lightred</code></td>
          <td><span style="display:inline-block;width:100px;height:30px;background-color:salmon;border-radius:4px"></span>
          </td>
        </tr>
        <tr>
          <td><code>orange</code></td>
          <td><span style="display:inline-block;width:100px;height:30px;background-color:orange;border-radius:4px"></span>
          </td>
        </tr>
        <tr>
          <td><code>beige</code></td>
          <td><span style="display:inline-block;width:100px;height:30px;background-color:beige;border-radius:4px"></span></td>
        </tr>
        <tr>
          <td><code>lightgreen</code></td>
          <td><span style="display:inline-block;width:100px;height:30px;background-color:lightgreen;border-radius:4px"></span>
          </td>
        </tr>
        <tr>
          <td><code>green</code></td>
          <td><span style="display:inline-block;width:100px;height:30px;background-color:green;border-radius:4px"></span></td>
        </tr>
        <tr>
          <td><code>darkgreen</code></td>
          <td><span style="display:inline-block;width:100px;height:30px;background-color:darkgreen;border-radius:4px"></span>
          </td>
        </tr>
        <tr>
          <td><code>darkblue</code></td>
          <td><span style="display:inline-block;width:100px;height:30px;background-color:darkblue;border-radius:4px"></span>
          </td>
        </tr>
        <tr>
          <td><code>blue</code></td>
          <td><span style="display:inline-block;width:100px;height:30px;background-color:blue;border-radius:4px"></span>
          </td>
        </tr>
        <tr>
          <td><code>cadetblue</code></td>
          <td><span style="display:inline-block;width:100px;height:30px;background-color:cadetblue;border-radius:4px"></span>
          </td>
        </tr>
        <tr>
          <td><code>lightblue</code></td>
          <td><span style="display:inline-block;width:100px;height:30px;background-color:lightblue;border-radius:4px"></span>
          </td>
        </tr>
        <tr>
          <td><code>pink</code></td>
          <td><span style="display:inline-block;width:100px;height:30px;background-color:pink;border-radius:4px"></span>
          </td>
        </tr>
        <tr>
          <td><code>purple</code></td>
          <td><span style="display:inline-block;width:100px;height:30px;background-color:purple;border-radius:4px"></span>
          </td>
        </tr>
        <tr>
          <td><code>darkpurple</code></td>
          <td><span style="display:inline-block;width:100px;height:30px;background-color:indigo;border-radius:4px"></span>
          </td>
        </tr>
      </tbody>
    </table>

    <p>
      Enfin, le paramètre <code>popup</code> permet de renseigner le contenu d'une fenêtre qui s'ouvre lors du clic
      sur le marqueur. 
    </p>

    <p>
      La méthode <code>PolyLine()</code> dessine une ligne brisée à partir d'une liste de couples de coordonnées.
    </p>

    <p>
      Enfin, la méthode <code>save()</code> génère un fichier HTML qui embarque
      la carte, ainsi que tous les éléments ajoutés par le script (marqueurs,
      lignes, polygones, <em>etc</em>).
    </p>


    <div class="exercise">
      <h4>Exercice</h4>
      <p>
        Modifiez (une dernière fois) le script <code>GPXplorer.py</code> afin de générer une carte centrée sur le
        point de départ du parcours. Vous représenterez le parcours sous la forme d'une ligne brisée bleue d'épaisseur
        3.
        Vous placerez aussi quatre marqueurs : un sur le départ, un sur l'arrivée et deux autres correspondant
        respectivement
        aux points de plus faible et plus grande altitude.
      </p>

      <details>
        <summary>
          <span class="button is-primary">Correction</span>
        </summary>
        <pre class=" language-python"><code class=" language-python"><span class="prism--token prism--keyword">from</span> bs4 <span class="prism--token prism--keyword">import</span> BeautifulSoup
<span class="prism--token prism--keyword">from</span> gpsutils <span class="prism--token prism--keyword">import</span> <span class="prism--token prism--operator">*</span>
<span class="prism--token prism--keyword">import</span> folium

<span class="prism--token prism--comment"># Liste des latitudes exprimées en degrés</span>
latitude  <span class="prism--token prism--operator">=</span> <span class="prism--token prism--punctuation">[</span><span class="prism--token prism--punctuation">]</span>

<span class="prism--token prism--comment"># Liste des longitudes exprimées en degrés</span>
longitude <span class="prism--token prism--operator">=</span> <span class="prism--token prism--punctuation">[</span><span class="prism--token prism--punctuation">]</span>

<span class="prism--token prism--comment"># Liste des altitudes exprimées en mètres</span>
elevation <span class="prism--token prism--operator">=</span> <span class="prism--token prism--punctuation">[</span><span class="prism--token prism--punctuation">]</span>

<span class="prism--token prism--comment"># Liste des distances cumulées</span>
distance  <span class="prism--token prism--operator">=</span> <span class="prism--token prism--punctuation">[</span><span class="prism--token prism--punctuation">]</span>

<span class="prism--token prism--comment"># Liste des temps en secondes,</span>
<span class="prism--token prism--comment"># le premier étant égal à 0</span>
time      <span class="prism--token prism--operator">=</span> <span class="prism--token prism--punctuation">[</span><span class="prism--token prism--punctuation">]</span>

<span class="prism--token prism--comment"># Chargement du fichier GPX</span>
content <span class="prism--token prism--operator">=</span> <span class="prism--token prism--builtin">open</span><span class="prism--token prism--punctuation">(</span><span class="prism--token prism--string">'RATJ2012-21km-herve.schely.gpx'</span><span class="prism--token prism--punctuation">)</span>

<span class="prism--token prism--comment"># Construction de l'arborescnce</span>
soup <span class="prism--token prism--operator">=</span> BeautifulSoup<span class="prism--token prism--punctuation">(</span>content<span class="prism--token prism--punctuation">,</span> <span class="prism--token prism--string">'lxml'</span><span class="prism--token prism--punctuation">)</span>

<span class="prism--token prism--comment">#</span>
<span class="prism--token prism--comment"># Heure de départ</span>
<span class="prism--token prism--comment">#</span>
start_time <span class="prism--token prism--operator">=</span> soup<span class="prism--token prism--punctuation">.</span>find<span class="prism--token prism--punctuation">(</span><span class="prism--token prism--string">'time'</span><span class="prism--token prism--punctuation">)</span><span class="prism--token prism--punctuation">.</span>string

<span class="prism--token prism--keyword">for</span> point <span class="prism--token prism--keyword">in</span> soup<span class="prism--token prism--punctuation">.</span>find_all<span class="prism--token prism--punctuation">(</span><span class="prism--token prism--string">'trkpt'</span><span class="prism--token prism--punctuation">)</span><span class="prism--token prism--punctuation">:</span>
    latitude<span class="prism--token prism--punctuation">.</span>append<span class="prism--token prism--punctuation">(</span><span class="prism--token prism--builtin">float</span><span class="prism--token prism--punctuation">(</span>point<span class="prism--token prism--punctuation">[</span><span class="prism--token prism--string">'lat'</span><span class="prism--token prism--punctuation">]</span><span class="prism--token prism--punctuation">)</span><span class="prism--token prism--punctuation">)</span>
    longitude<span class="prism--token prism--punctuation">.</span>append<span class="prism--token prism--punctuation">(</span><span class="prism--token prism--builtin">float</span><span class="prism--token prism--punctuation">(</span>point<span class="prism--token prism--punctuation">[</span><span class="prism--token prism--string">'lon'</span><span class="prism--token prism--punctuation">]</span><span class="prism--token prism--punctuation">)</span><span class="prism--token prism--punctuation">)</span>
    <span class="prism--token prism--keyword">for</span> param <span class="prism--token prism--keyword">in</span> point<span class="prism--token prism--punctuation">.</span>children<span class="prism--token prism--punctuation">:</span>
        <span class="prism--token prism--keyword">if</span> param<span class="prism--token prism--punctuation">.</span>name <span class="prism--token prism--operator">==</span> <span class="prism--token prism--string">'ele'</span><span class="prism--token prism--punctuation">:</span>
            elevation<span class="prism--token prism--punctuation">.</span>append<span class="prism--token prism--punctuation">(</span><span class="prism--token prism--builtin">float</span><span class="prism--token prism--punctuation">(</span>param<span class="prism--token prism--punctuation">.</span>string<span class="prism--token prism--punctuation">)</span><span class="prism--token prism--punctuation">)</span>
        <span class="prism--token prism--keyword">if</span> param<span class="prism--token prism--punctuation">.</span>name <span class="prism--token prism--operator">==</span> <span class="prism--token prism--string">'time'</span><span class="prism--token prism--punctuation">:</span>
            time<span class="prism--token prism--punctuation">.</span>append<span class="prism--token prism--punctuation">(</span>duration<span class="prism--token prism--punctuation">(</span>start_time<span class="prism--token prism--punctuation">,</span> param<span class="prism--token prism--punctuation">.</span>string<span class="prism--token prism--punctuation">)</span><span class="prism--token prism--punctuation">)</span>
            
distance<span class="prism--token prism--punctuation">.</span>append<span class="prism--token prism--punctuation">(</span><span class="prism--token prism--number">0</span><span class="prism--token prism--punctuation">)</span>
<span class="prism--token prism--keyword">for</span> i <span class="prism--token prism--keyword">in</span> <span class="prism--token prism--builtin">range</span><span class="prism--token prism--punctuation">(</span><span class="prism--token prism--number">1</span><span class="prism--token prism--punctuation">,</span><span class="prism--token prism--builtin">len</span><span class="prism--token prism--punctuation">(</span>latitude<span class="prism--token prism--punctuation">)</span><span class="prism--token prism--punctuation">)</span><span class="prism--token prism--punctuation">:</span>
    d <span class="prism--token prism--operator">=</span> great_circle_distance<span class="prism--token prism--punctuation">(</span>latitude<span class="prism--token prism--punctuation">[</span>i<span class="prism--token prism--operator">-</span><span class="prism--token prism--number">1</span><span class="prism--token prism--punctuation">]</span><span class="prism--token prism--punctuation">,</span> longitude<span class="prism--token prism--punctuation">[</span>i<span class="prism--token prism--operator">-</span><span class="prism--token prism--number">1</span><span class="prism--token prism--punctuation">]</span><span class="prism--token prism--punctuation">,</span> latitude<span class="prism--token prism--punctuation">[</span>i<span class="prism--token prism--punctuation">]</span><span class="prism--token prism--punctuation">,</span> longitude<span class="prism--token prism--punctuation">[</span>i<span class="prism--token prism--punctuation">]</span><span class="prism--token prism--punctuation">)</span>
    distance<span class="prism--token prism--punctuation">.</span>append<span class="prism--token prism--punctuation">(</span>distance<span class="prism--token prism--punctuation">[</span>i<span class="prism--token prism--operator">-</span><span class="prism--token prism--number">1</span><span class="prism--token prism--punctuation">]</span><span class="prism--token prism--operator">+</span>d<span class="prism--token prism--punctuation">)</span>

minElevationIndex <span class="prism--token prism--operator">=</span> <span class="prism--token prism--number">0</span>
maxElevationIndex <span class="prism--token prism--operator">=</span> <span class="prism--token prism--number">0</span>
<span class="prism--token prism--keyword">for</span> i <span class="prism--token prism--keyword">in</span> <span class="prism--token prism--builtin">range</span><span class="prism--token prism--punctuation">(</span><span class="prism--token prism--number">1</span><span class="prism--token prism--punctuation">,</span><span class="prism--token prism--builtin">len</span><span class="prism--token prism--punctuation">(</span>elevation<span class="prism--token prism--punctuation">)</span><span class="prism--token prism--punctuation">)</span><span class="prism--token prism--punctuation">:</span>
    <span class="prism--token prism--keyword">if</span> elevation<span class="prism--token prism--punctuation">[</span>i<span class="prism--token prism--punctuation">]</span><span class="prism--token prism--operator">&gt;</span>elevation<span class="prism--token prism--punctuation">[</span>maxElevationIndex<span class="prism--token prism--punctuation">]</span><span class="prism--token prism--punctuation">:</span>
        maxElevationIndex <span class="prism--token prism--operator">=</span> i
    <span class="prism--token prism--keyword">if</span> elevation<span class="prism--token prism--punctuation">[</span>i<span class="prism--token prism--punctuation">]</span><span class="prism--token prism--operator">&lt;</span>elevation<span class="prism--token prism--punctuation">[</span>minElevationIndex<span class="prism--token prism--punctuation">]</span><span class="prism--token prism--punctuation">:</span>
        minElevationIndex <span class="prism--token prism--operator">=</span> i

fmap <span class="prism--token prism--operator">=</span> folium<span class="prism--token prism--punctuation">.</span>Map<span class="prism--token prism--punctuation">(</span>location<span class="prism--token prism--operator">=</span><span class="prism--token prism--punctuation">[</span>latitude<span class="prism--token prism--punctuation">[</span><span class="prism--token prism--number">0</span><span class="prism--token prism--punctuation">]</span><span class="prism--token prism--punctuation">,</span> longitude<span class="prism--token prism--punctuation">[</span><span class="prism--token prism--number">0</span><span class="prism--token prism--punctuation">]</span><span class="prism--token prism--punctuation">]</span><span class="prism--token prism--punctuation">,</span> tiles<span class="prism--token prism--operator">=</span><span class="prism--token prism--string">'OpenStreetMap'</span><span class="prism--token prism--punctuation">,</span> zoom_start<span class="prism--token prism--operator">=</span><span class="prism--token prism--number">13</span><span class="prism--token prism--punctuation">)</span>

folium<span class="prism--token prism--punctuation">.</span>Marker<span class="prism--token prism--punctuation">(</span><span class="prism--token prism--punctuation">[</span>latitude<span class="prism--token prism--punctuation">[</span><span class="prism--token prism--number">0</span><span class="prism--token prism--punctuation">]</span><span class="prism--token prism--punctuation">,</span> longitude<span class="prism--token prism--punctuation">[</span><span class="prism--token prism--number">0</span><span class="prism--token prism--punctuation">]</span><span class="prism--token prism--punctuation">]</span><span class="prism--token prism--punctuation">,</span>
              popup<span class="prism--token prism--operator">=</span><span class="prism--token prism--string">'Départ'</span><span class="prism--token prism--punctuation">,</span>
              icon<span class="prism--token prism--operator">=</span>folium<span class="prism--token prism--punctuation">.</span>Icon<span class="prism--token prism--punctuation">(</span>color<span class="prism--token prism--operator">=</span><span class="prism--token prism--string">'green'</span><span class="prism--token prism--punctuation">)</span><span class="prism--token prism--punctuation">)</span><span class="prism--token prism--punctuation">.</span>add_to<span class="prism--token prism--punctuation">(</span>fmap<span class="prism--token prism--punctuation">)</span>

folium<span class="prism--token prism--punctuation">.</span>Marker<span class="prism--token prism--punctuation">(</span><span class="prism--token prism--punctuation">[</span>latitude<span class="prism--token prism--punctuation">[</span><span class="prism--token prism--operator">-</span><span class="prism--token prism--number">1</span><span class="prism--token prism--punctuation">]</span><span class="prism--token prism--punctuation">,</span> longitude<span class="prism--token prism--punctuation">[</span><span class="prism--token prism--operator">-</span><span class="prism--token prism--number">1</span><span class="prism--token prism--punctuation">]</span><span class="prism--token prism--punctuation">]</span><span class="prism--token prism--punctuation">,</span>
              popup<span class="prism--token prism--operator">=</span><span class="prism--token prism--string">'Arrivée'</span><span class="prism--token prism--punctuation">,</span>
              icon<span class="prism--token prism--operator">=</span>folium<span class="prism--token prism--punctuation">.</span>Icon<span class="prism--token prism--punctuation">(</span>color<span class="prism--token prism--operator">=</span><span class="prism--token prism--string">'red'</span><span class="prism--token prism--punctuation">)</span><span class="prism--token prism--punctuation">)</span><span class="prism--token prism--punctuation">.</span>add_to<span class="prism--token prism--punctuation">(</span>fmap<span class="prism--token prism--punctuation">)</span>

folium<span class="prism--token prism--punctuation">.</span>Marker<span class="prism--token prism--punctuation">(</span><span class="prism--token prism--punctuation">[</span>latitude<span class="prism--token prism--punctuation">[</span>minElevationIndex<span class="prism--token prism--punctuation">]</span><span class="prism--token prism--punctuation">,</span> longitude<span class="prism--token prism--punctuation">[</span>minElevationIndex<span class="prism--token prism--punctuation">]</span><span class="prism--token prism--punctuation">]</span><span class="prism--token prism--punctuation">,</span>
              popup<span class="prism--token prism--operator">=</span><span class="prism--token prism--builtin">str</span><span class="prism--token prism--punctuation">(</span>elevation<span class="prism--token prism--punctuation">[</span>minElevationIndex<span class="prism--token prism--punctuation">]</span><span class="prism--token prism--punctuation">)</span> <span class="prism--token prism--operator">+</span> <span class="prism--token prism--string">' m'</span><span class="prism--token prism--punctuation">,</span>
              icon<span class="prism--token prism--operator">=</span>folium<span class="prism--token prism--punctuation">.</span>Icon<span class="prism--token prism--punctuation">(</span>color<span class="prism--token prism--operator">=</span><span class="prism--token prism--string">'blue'</span><span class="prism--token prism--punctuation">)</span><span class="prism--token prism--punctuation">)</span><span class="prism--token prism--punctuation">.</span>add_to<span class="prism--token prism--punctuation">(</span>fmap<span class="prism--token prism--punctuation">)</span>

folium<span class="prism--token prism--punctuation">.</span>Marker<span class="prism--token prism--punctuation">(</span><span class="prism--token prism--punctuation">[</span>latitude<span class="prism--token prism--punctuation">[</span>maxElevationIndex<span class="prism--token prism--punctuation">]</span><span class="prism--token prism--punctuation">,</span> longitude<span class="prism--token prism--punctuation">[</span>maxElevationIndex<span class="prism--token prism--punctuation">]</span><span class="prism--token prism--punctuation">]</span><span class="prism--token prism--punctuation">,</span>
              popup<span class="prism--token prism--operator">=</span><span class="prism--token prism--builtin">str</span><span class="prism--token prism--punctuation">(</span>elevation<span class="prism--token prism--punctuation">[</span>maxElevationIndex<span class="prism--token prism--punctuation">]</span><span class="prism--token prism--punctuation">)</span> <span class="prism--token prism--operator">+</span> <span class="prism--token prism--string">' m'</span><span class="prism--token prism--punctuation">,</span>
              icon<span class="prism--token prism--operator">=</span>folium<span class="prism--token prism--punctuation">.</span>Icon<span class="prism--token prism--punctuation">(</span>color<span class="prism--token prism--operator">=</span><span class="prism--token prism--string">'lightblue'</span><span class="prism--token prism--punctuation">)</span><span class="prism--token prism--punctuation">)</span><span class="prism--token prism--punctuation">.</span>add_to<span class="prism--token prism--punctuation">(</span>fmap<span class="prism--token prism--punctuation">)</span>

<span class="prism--token prism--comment"># Draw polyline</span>
points <span class="prism--token prism--operator">=</span><span class="prism--token prism--punctuation">[</span><span class="prism--token prism--punctuation">]</span>
<span class="prism--token prism--keyword">for</span> i <span class="prism--token prism--keyword">in</span> <span class="prism--token prism--builtin">range</span><span class="prism--token prism--punctuation">(</span><span class="prism--token prism--number">0</span><span class="prism--token prism--punctuation">,</span> <span class="prism--token prism--builtin">len</span><span class="prism--token prism--punctuation">(</span>latitude<span class="prism--token prism--punctuation">)</span><span class="prism--token prism--punctuation">)</span><span class="prism--token prism--punctuation">:</span>
    points<span class="prism--token prism--punctuation">.</span>append<span class="prism--token prism--punctuation">(</span><span class="prism--token prism--builtin">tuple</span><span class="prism--token prism--punctuation">(</span><span class="prism--token prism--punctuation">[</span>latitude<span class="prism--token prism--punctuation">[</span>i<span class="prism--token prism--punctuation">]</span><span class="prism--token prism--punctuation">,</span> longitude<span class="prism--token prism--punctuation">[</span>i<span class="prism--token prism--punctuation">]</span><span class="prism--token prism--punctuation">]</span><span class="prism--token prism--punctuation">)</span><span class="prism--token prism--punctuation">)</span>

folium<span class="prism--token prism--punctuation">.</span>PolyLine<span class="prism--token prism--punctuation">(</span>points<span class="prism--token prism--punctuation">,</span> color<span class="prism--token prism--operator">=</span><span class="prism--token prism--string">"blue"</span><span class="prism--token prism--punctuation">,</span> weight<span class="prism--token prism--operator">=</span><span class="prism--token prism--number">3</span><span class="prism--token prism--punctuation">,</span> opacity<span class="prism--token prism--operator">=</span><span class="prism--token prism--number">0.6</span><span class="prism--token prism--punctuation">)</span><span class="prism--token prism--punctuation">.</span>add_to<span class="prism--token prism--punctuation">(</span>fmap<span class="prism--token prism--punctuation">)</span>

fmap<span class="prism--token prism--punctuation">.</span>save<span class="prism--token prism--punctuation">(</span><span class="prism--token prism--string">'gpx.html'</span><span class="prism--token prism--punctuation">)</span></code></pre>
      </details>
    </div>

    <div class="embed16x9">
      <iframe width="640" height="360" src="./@oliviernocent_files/gpx.html"></iframe>
    </div>

    <p>
      Vous pouvez tester votre script sur d'autres fichiers GPX.
    </p>

    <ul>
      <li><a href="https://iut-info.univ-reims.fr/users/nocent/python/content/data/RATJ2012-10km-olivier.nocent.gpx" target="_blank">RATJ2012-10km-olivier.nocent.gpx</a>
      </li>
      <li><a href="https://iut-info.univ-reims.fr/users/nocent/python/content/data/biking.gpx" target="_blank">biking.gpx</a></li>
      <li><a href="https://iut-info.univ-reims.fr/users/nocent/python/content/data/running.gpx" target="_blank">running.gpx</a></li>
    </ul>

    <p>
      Je suggère que nous nous dégourdissions les jambes avant d'aborder le chapitre
      suivant qui traite des interfaces graphiques ou comment créer des applications
      Python dans une fenêtre avec des boutons, des cases à cocher, des listes déroulantes,
      des images, <em>etc</em>.
    </p>
  </div>
</section>

  <section class="section">
    <div class="container content">
      <p>        <a class="button is-medium is-link" href="https://iut-info.univ-reims.fr/users/nocent/python/?section=8">
					<svg class="svg-inline--fa fa-chevron-left fa-w-10" aria-hidden="true" data-prefix="fa" data-icon="chevron-left" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" data-fa-i2svg=""><path fill="currentColor" d="M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"></path></svg><!-- <i class="fa fa-chevron-left" aria-hidden="true"></i> -->
				</a>				<a class="button is-medium is-link" href="https://iut-info.univ-reims.fr/users/nocent/python/?section=10">
					<svg class="svg-inline--fa fa-chevron-right fa-w-10" aria-hidden="true" data-prefix="fa" data-icon="chevron-right" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" data-fa-i2svg=""><path fill="currentColor" d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"></path></svg><!-- <i class="fa fa-chevron-right" aria-hidden="true"></i> -->
				</a>      </p>
    </div>
  </section>

    <footer class="footer">
      2014-2021 © Université de Reims Champagne-Ardenne
    </footer>    
  


    <script src="./@oliviernocent_files/prism.js.téléchargement"></script>
    <script>
    Prism.plugins.customClass.prefix('prism--')
    </script>
    <script src="./@oliviernocent_files/modaltoggle.js.téléchargement"></script>

  
</body></html>